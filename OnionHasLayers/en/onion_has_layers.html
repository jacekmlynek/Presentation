<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
    <!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
        <!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
            <!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
                <head>
                    <meta charset="utf-8">
                    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

                    <title>Onion has layers</title>

                    <meta name="author" content="Michał Zając, Jacek Młynek">
                    <meta name="viewport" content="width=1024, user-scalable=no">

                    <!-- Core and extension CSS files -->
                    <link rel="stylesheet" href="core/deck.core.css">
                    <link rel="stylesheet" href="extensions/goto/deck.goto.css">
                    <link rel="stylesheet" href="extensions/menu/deck.menu.css">
                    <link rel="stylesheet" href="extensions/navigation/deck.navigation.css">
                    <link rel="stylesheet" href="extensions/status/deck.status.css">
                    <link rel="stylesheet" href="extensions/hash/deck.hash.css">
                    <link rel="stylesheet" href="extensions/codemirror/deck.codemirror.css">
                    <link rel="stylesheet" href="extensions/codemirror/themes/default.css">


                    <!-- Theme CSS files (menu swaps these out) -->
                    <link rel="stylesheet" id="style-theme-link" href="themes/style/web-2.0.css">
                    <link rel="stylesheet" id="transition-theme-link" href="themes/transition/horizontal-slide.css">

                    <!-- Custom CSS just for this page -->
                    <!-- GB: changed fixed name to variable -->
                    <link rel="stylesheet"  href="onion_has_layers.css">

                    <script src="lib/modernizr.custom.js"></script>
                </head>

                <body class="deck-container">

                   <!-- <div class="theme-menu">
                        <h2>Themes</h2>

                        <label for="style-themes">Style:</label>
                        <select id="style-themes">
                            <option selected value="themes/style/web-2.0.css">Web 2.0</option>
                            <option value="themes/style/swiss.css">Swiss</option>
                            <option value="themes/style/neon.css">Neon</option>
                            <option value="">None</option>
                        </select>

                        <label for="transition-themes">Transition:</label>
                        <select id="transition-themes">
                            <option selected value="themes/transition/horizontal-slide.css">Horizontal Slide</option>
                            <option value="themes/transition/vertical-slide.css">Vertical Slide</option>
                            <option value="themes/transition/fade.css">Fade</option>
                            <option value="">None</option>
                        </select>
                      </div> -->

                    <section class="slide" id="title-slide">
                    <h1>Onion has layers</h1>
                    </section>

                    <!-- note: assumes no header (breaking slides w/ SLIDE directive) -->
                    
                        <section class="slide" id="2">
                        <!-- _S9SLIDE_  -->

<h2 id="long-life-systems">Long-life systems</h2>

<pre><code>Did you known that some systems lifes more than one year?
</code></pre>

<p><img src="../img/long_life_system.jpg" alt="Long life system" title="Long life system" /></p>


                        </section>
                    
                        <section class="slide" id="3">
                        <!-- _S9SLIDE_  -->

<h2 id="few-facts-about-our-application">Few facts about our application</h2>
<ul>
  <li>
    <h4 id="have-worked-on-prd-from-five-years">Have worked on PRD from five years</h4>
  </li>
  <li>
    <h4 id="main-booking-engin-to-sixty-tourist-agency">Main booking engin to sixty tourist agency</h4>
  </li>
  <li>
    <h4 id="lines-of-production-code-in-c">44,000 lines of production code in <em>C#</em></h4>
  </li>
  <li>
    <h4 id="lines-of-production-code-in-javascript">18,000 lines of production code in <em>Javascript</em></h4>
  </li>
  <li>
    <h4 id="tests">1,200 tests</h4>
  </li>
  <li>
    <h4 id="releases">40 releases</h4>
  </li>
  <li>
    <h4 id="integrate-about-10-subsystems">Integrate about 10 subsystems</h4>
  </li>
</ul>


                        </section>
                    
                        <section class="slide" id="4">
                        <!-- _S9SLIDE_  -->

<h2 id="do-you-remember-bob-the-builder">Do you remember Bob the Builder?</h2>

<p><img src="../img/bob.png" alt="Bob budowniczy" title="Bob budowniczy" /></p>


                        </section>
                    
                        <section class="slide" id="5">
                        <!-- _S9SLIDE_  -->

<h2 id="a-lot-of-us-seems-to-like-bobs-approach">A lot of us seems to like Bob’s approach.</h2>
<ul>
  <li>
    <h4 id="starts-working-with-legalcy-system">Starts working with legalcy system</h4>
  </li>
  <li>
    <h4 id="complains-on-it">Complains on it</h4>
  </li>
  <li>
    <h4 id="deside-to-build-the-same-system-from-the-beginning">Deside to build the same system from the beginning</h4>
  </li>
  <li>
    <h4 id="makes-few-things-better">Makes few things <em>better</em></h4>
  </li>
  <li>
    <h4 id="start-to-belive-in-steel-design-and-lost-big-picture">Start to belive in “steel” design and lost big picture</h4>
  </li>
  <li>
    <h4 id="after-some-time-the-system-looks-like-the-old-one">After some time the system looks like the old one</h4>
  </li>
</ul>


                        </section>
                    
                        <section class="slide" id="6">
                        <!-- _S9SLIDE_  -->

<h2 id="architecture-evaluation">Architecture Evaluation</h2>

<pre><code>Good architectural design is not only a good project. Good project is just the beginning, you must think about  architectural design all the time.  
</code></pre>

<p><img src="../img/systematicly_work.jpg" alt="Systematic work" title="Systematic work" /></p>


                        </section>
                    
                        <section class="slide" id="7">
                        <!-- _S9SLIDE_  -->

<h2 id="architecture-evaluation-1">Architecture Evaluation</h2>

<pre><code>Even well working system can be easy break.
</code></pre>

<p><img src="../img/SOLID_Jenga.jpg" alt="Jenga" title="Jenga" /></p>


                        </section>
                    
                        <section class="slide" id="8">
                        <!-- _S9SLIDE_  -->

<h2 id="architecture-evaluation-2">Architecture Evaluation</h2>

<pre><code>Evan weak system can become strong.
</code></pre>

<p><img src="../img/correct_system.jpg" alt="Correct system" title="Correct system" /></p>


                        </section>
                    
                        <section class="slide" id="9">
                        <!-- _S9SLIDE_  -->

<h2 id="what-we-got-in-our-application">What we got in our application</h2>

<ul>
  <li>
    <h4 id="big-ball-of-mud">Big Ball of Mud</h4>
  </li>
  <li>
    <h4 id="transaction-script">Transaction Script</h4>
  </li>
  <li>
    <h4 id="no-logic-and-infrastructure-separetion">No logic and infrastructure separetion</h4>
  </li>
  <li>
    <h4 id="no-any-kind-of-dependency-management">No any kind of dependency management</h4>
  </li>
  <li>
    <h4 id="a-lot-of-code-duplication">A lot of code duplication</h4>
  </li>
  <li>
    <h4 id="javascript-as-one-big-ani-pattern">Javascript as one big ani pattern</h4>
  </li>
</ul>

<h4 id="in-other-words">In other words:</h4>
<pre><code>fragility + no test = disaster!
</code></pre>


                        </section>
                    
                        <section class="slide" id="10">
                        <!-- _S9SLIDE_  -->

<h2 id="what-pushed-us-into-changes">What pushed us into changes</h2>

<ul>
  <li>
    <h4 id="low-level-of-system-reliability">Low level of system reliability</h4>
    <p>A lot of opened issues and bugs.</p>
  </li>
  <li>
    <h4 id="updates-take-so-long-time">Updates take so long time</h4>
    <p>In some cases it can take even one day and fail</p>
  </li>
  <li>
    <h4 id="no-any-kind-of-automatic-builds">No any kind of automatic builds</h4>
    <p>Very hard to create new system instance</p>
  </li>
  <li>
    <h4 id="at-least-few-years-system-maintenes-perspective">At least few years system maintenes perspective</h4>
    <p>System reminds marathon man after marathon although marathon still go on</p>
  </li>
  <li>
    <h4 id="system-development">System development</h4>
    <p>New requests from our clients and new clients still required system development</p>
  </li>
</ul>


                        </section>
                    
                        <section class="slide" id="11">
                        <!-- _S9SLIDE_  -->

<h2 id="first-steps">First steps</h2>

<ul>
  <li>
    <h4 id="first-unit-tests">First unit tests</h4>
  </li>
  <li>
    <h4 id="cleaning-useless-code">Cleaning useless code</h4>
  </li>
  <li>
    <h4 id="dupication-code-resolving">Dupication code resolving</h4>
  </li>
  <li>
    <h4 id="related-problems-grouping">Related problems grouping</h4>
  </li>
  <li>
    <h4 id="first-attempt-to-layer-isolation">First attempt to layer isolation</h4>
  </li>
  <li>
    <h4 id="first-entry-to-client-side-dark-world-of-javscript">First entry to client side( Dark World of Javscript)</h4>
  </li>
</ul>


                        </section>
                    
                        <section class="slide" id="12">
                        <!-- _S9SLIDE_  -->

<h2 id="things-are-starting-to-gel">Things are starting to gel</h2>

<p><img src="../img/system_puzzle.jpg" alt="System puzzle" title="System puzzle" /></p>


                        </section>
                    
                        <section class="slide" id="13">
                        <!-- _S9SLIDE_   -->

<h2 id="composite-and-mvp-pattern-in-javascript">Composite and MVP pattern in Javascript</h2>
<!-- begin left {} -->
<table width="100%"><tr><td width="50%" style="vertical-align: top;">

      <p><img src="../img/js_modules.jpg" alt="Js modules" /></p>
    </td>
<!-- end left -->


<!-- begin right {} -->
<td width="50%" style="vertical-align: top;">

      <!-- begin step {} -->
      <div class="slide step">

        <ul>
          <li>Every HTML elements can contains other elements - excellent example of <em>composite</em> pattern.</li>
        </ul>

      </div>
      <!-- end step -->

      <!-- begin step {} -->
      <div class="slide step">

        <ul>
          <li>Every element has distinct role, however each element is builds with the same parts:
            <ul>
              <li>We have part responsible for HTML - <em>View</em></li>
              <li>We have part responsible for a data - <em>Model</em></li>
              <li>We have part responsible for UI logic -<em>Presenter</em></li>
              <li>Model is not related with View neither Presenter</li>
            </ul>
          </li>
        </ul>

      </div>
      <!-- end step -->

      <!-- begin step {} -->
      <div class="slide step">

        <ul>
          <li>Every element exist in isolation</li>
        </ul>

      </div>
      <!-- end step -->

    </td></tr></table>
<!-- end right -->


                        </section>
                    
                        <section class="slide" id="14">
                        <!-- _S9SLIDE_  -->

<h2 id="what-we-achieve-on-the-client-side">What we achieve on the client side?</h2>

<ul>
  <li>
    <h4 id="basic-division-of-responsibility">Basic division of Responsibility</h4>
  </li>
  <li>
    <h4 id="possibility-of-bug-fix-without-text-parser-">Possibility of bug fix without text parser :)</h4>
  </li>
  <li>
    <h4 id="module-reusability">Module reusability</h4>
  </li>
  <li>
    <h4 id="development-new-feature-without-risk-of-breaking-old-ones">Development new feature without risk of breaking old ones</h4>
  </li>
</ul>


                        </section>
                    
                        <section class="slide" id="15">
                        <!-- _S9SLIDE_  -->

<h2 id="dependency-injection--loose-coupling">Dependency Injection &amp; Loose Coupling</h2>
<ul>
  <li>
    <h4 id="tdd-and-unit-tests-were-like-first-sign-of-di">TDD and unit tests were like first sign of DI</h4>
  </li>
  <li>
    <h4 id="dependency-management---not-necessary-external-complex-and-heavy-framework">Dependency management - not necessary external complex and heavy framework</h4>
  </li>
  <li>
    <h4 id="step-by-step-involve-new-system-areas">Step by step involve new system areas</h4>
  </li>
  <li>
    <h4 id="a-lot-of-effort-to-isolate-from-external-components">A lot of effort to isolate from <em>external</em> components</h4>
  </li>
</ul>


                        </section>
                    
                        <section class="slide" id="16">
                        <!-- _S9SLIDE_  -->

<h2 id="domain-driven-design">Domain Driven Design</h2>
<ul>
  <li>
    <h4 id="upside-down">Upside-down</h4>
  </li>
  <li>
    <h4 id="focusing-on-domain-not-on-infrastructure">Focusing on domain not on infrastructure</h4>
  </li>
  <li>
    <h4 id="infrastructure-not-deside-about-domain">Infrastructure not deside about domain.</h4>
  </li>
  <li>
    <h4 id="domain-not-tools-or-frameworks-decide-about-design">Domain not tools or frameworks decide about design</h4>
  </li>
  <li>
    <h4 id="application-like-a-domain-description">Application like a domain description</h4>
  </li>
  <li>
    <h4 id="system-built-on-domain-is-more-flexible-for-requirements-changes">System built on domain is more flexible for requirements changes</h4>
  </li>
</ul>


                        </section>
                    
                        <section class="slide" id="17">
                        <!-- _S9SLIDE_  -->

<h2 id="first-sings-of-system-architecture">First sings of system architecture</h2>
<ul>
  <li>
    <h4 id="used-patterns-and-good-practices-in-each-layer-and-components-have-form-whole-system-architecture">Used patterns and good practices in each layer and components have form whole system architecture</h4>
  </li>
  <li>
    <h4 id="additionaly-in-frontend-layer-appears-new-factors">Additionaly in frontend layer appears new factors</h4>
    <ul>
      <li>Quick development and changes in external libraries</li>
      <li>Global dev community start taking Javascript seriously as a language   </li>
      <li>Requests from clinets - big pressure on experience</li>
      <li>Client side MVP becomes not sufficient - new layers appears on the client </li>
    </ul>
  </li>
</ul>


                        </section>
                    
                        <section class="slide" id="18">
                        <!-- _S9SLIDE_  -->

<h2 id="where-we-are-now">Where we are now</h2>

<p><img src="../img/onion_layers.jpg" alt="Generic onion" title="Generic onion" /></p>


                        </section>
                    
                        <section class="slide" id="19">
                        <!-- _S9SLIDE_  -->

<h2 id="back-end-flavour-onion">Back-end flavour onion</h2>

<p><img src="../img/BackendOnion.jpg" alt="Cebula beckend" title="Backend Onion" /></p>


                        </section>
                    
                        <section class="slide" id="20">
                        <!-- _S9SLIDE_  -->

<h2 id="front-end-flavour-onion">Front-end flavour onion</h2>

<p><img src="../img/frontend_onion.jpg" alt="Cebula front-end'owa" title="Cebula front-end'owa" /></p>


                        </section>
                    
                        <section class="slide" id="21">
                        <!-- _S9SLIDE_  -->

<h2 id="bibliography">Bibliography:</h2>
<ul>
  <li>
    <h4 id="jimmy-nilsson-applying-domain-driven-design-and-patterns-with-examples-in-c-and-net">Jimmy Nilsson. Applying Domain-Driven Design and Patterns: With Examples in C# and .NET</h4>
  </li>
  <li>
    <h4 id="robert-c-martin-agile-principles-patterns-and-practices-in-c">Robert C. Martin. Agile Principles, Patterns, and Practices in C</h4>
  </li>
  <li>
    <h4 id="httpjeffreypalermocomblogthe-onion-architecture-part-1">http://jeffreypalermo.com/blog/the-onion-architecture-part-1/</h4>
  </li>
  <li>
    <h4 id="httpmartinfowlercomeaadevuiarchshtml">http://martinfowler.com/eaaDev/uiArchs.html</h4>
  </li>
  <li>
    <h4 id="httpwwwslidesharenetnzakasscalable-javascript-application-architecture">http://www.slideshare.net/nzakas/scalable-javascript-application-architecture</h4>
  </li>
</ul>

                        </section>
                    


                    <!--<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
                    <a href="#" class="deck-next-link" title="Next">&#8594;</a>
                    -->
                    <p class="deck-status">
                        <span class="deck-status-current"></span>
                        /
                        <span class="deck-status-total"></span>
                    </p>

                    <form action="." method="get" class="goto-form">
                        <label for="goto-slide">Go to slide:</label>
                        <input type="number" name="slidenum" id="goto-slide">
                        <input type="submit" value="Go">
                    </form>

                    <a href="." title="Permalink to this slide" class="deck-permalink">#</a>


                    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
                    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
                    <script>window.jQuery || document.write('<script src="lib/jquery-1.6.4.min.js"><\/script>')</script>

                        <!-- Deck Core and extensions -->
                        <script src="core/deck.core.js"></script>
                        <script src="extensions/menu/deck.menu.js"></script>
                        <script src="extensions/goto/deck.goto.js"></script>
                        <script src="extensions/status/deck.status.js"></script>
                        <script src="extensions/navigation/deck.navigation.js"></script>
                        <script src="extensions/hash/deck.hash.js"></script>
                        <script src="extensions/codemirror/codemirror.js"></script>

                        <!-- include the code syntax you want to highlight -->
                        <!-- javascript -->
                        <script src="extensions/codemirror/mode/javascript/javascript.js"></script>
                        <script src="extensions/codemirror/mode/ruby/ruby.js"></script>

                        <!-- html mode : note code miror requires xml, css and javasript modes for html rendering -->
                        <script src="extensions/codemirror/mode/xml/xml.js"></script>
                        <script src="extensions/codemirror/mode/css/css.js"></script>
                        <script src="extensions/codemirror/mode/htmlmixed/htmlmixed.js"></script>

                        <script src="extensions/codemirror/deck.codemirror.js"></script>

                        <!-- Specific to this page -->
                        <!-- GB: adding introduction.js inline -->
                        <script>
                            $(function() {
                                // Deck initialization
                                $.deck('.slide');

                                $('#style-themes').change(function() {
                                    $('#style-theme-link').attr('href', $(this).val());
                                });

                                $('#transition-themes').change(function() {
                                    $('#transition-theme-link').attr('href', $(this).val());
                                });
                            });

                            
                        </script>

                    </body>
                </html>
